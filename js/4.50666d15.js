(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"0720":function(t,e,n){},"23f9":function(t,e,n){"use strict";var o=n("f965"),i=n.n(o);i.a},"3ae2":function(t,e,n){},"4e3f":function(t,e,n){"use strict";var o=n("3ae2"),i=n.n(o);i.a},"60f4":function(t,e,n){"use strict";var o=n("7076"),i=n.n(o);i.a},7076:function(t,e,n){},8325:function(t,e,n){"use strict";var o=n("0720"),i=n.n(o);i.a},a71b:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"weibo-detail"},[n("nav-bar",{nativeOn:{click:function(e){return t.closeCommentMode(e)}}}),n("div",{ref:"container",staticClass:"container",on:{click:t.closeCommentMode}},[n("a-weibo",{attrs:{weibo:t.weiboDetail}}),n("PlaceHolder"),n("div",{staticClass:"actions"},t._l(t.actions,(function(e){return n("div",{key:e.actionName,staticClass:"action",class:{"activated-action":t.currentActionName===e.actionName}},[t._v("\n        "+t._s(e.actionName)+t._s(e.number)+"\n      ")])})),0),n("div",{staticClass:"comment-weibo-list"},t._l(t.rootCommentList,(function(t){return n("a-comment",{key:t.id,attrs:{comment:t}})})),1)],1),n("Actions2",{on:{pushNewRootComment:t.pushNewRootComment}})],1)},i=[],a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"nav-bar"},[n("i",{staticClass:"iconfont icon-back",on:{click:function(e){return t.$router.back()}}}),n("span",[t._v("微博正文")]),n("copy-to-clipboard",{attrs:{size:"large","weibo-i-d":t.$route.params.weiboID}})],1)},s=[],r=n("811c"),c={name:"NavBar",components:{CopyToClipboard:r["a"]}},m=c,u=(n("4e3f"),n("2877")),l=Object(u["a"])(m,a,s,!1,null,"0eec64b0",null),d=l.exports,b=n("5508"),h=n("031f"),C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"placeholder"})},p=[],f={name:"PlaceHolder"},w=f,v=(n("8325"),Object(u["a"])(w,C,p,!1,null,"590f0ba4",null)),D=v.exports,$=n("063c"),I=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"actions2"},[t.commentModeStatus?n("div",{staticClass:"comment-mode"},[n("textarea-autosize",{ref:"myTextarea",staticClass:"content",attrs:{placeholder:"发表评论","min-height":30,"max-height":350,rows:"1"},model:{value:t.weiboIDCommentContent[t.$route.params.weiboID],callback:function(e){t.$set(t.weiboIDCommentContent,t.$route.params.weiboID,e)},expression:"weiboIDCommentContent[$route.params.weiboID]"}}),n("div",{staticClass:"emoji-send"},[n("div",{staticClass:"send-btn",class:{"can-send":t.canSend},on:{click:t.sendComment}},[t._v("发送")])])],1):n("div",{staticClass:"actions",on:{click:t.openCommentMode}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.weiboIDCommentContent[t.$route.params.weiboID],expression:"weiboIDCommentContent[$route.params.weiboID]"}],staticClass:"readonly-input",attrs:{placeholder:"发表评论"},domProps:{value:t.weiboIDCommentContent[t.$route.params.weiboID]},on:{input:function(e){e.target.composing||t.$set(t.weiboIDCommentContent,t.$route.params.weiboID,e.target.value)}}})])])},g=[],_=(n("ac1f"),n("5319"),n("d8ad")),N=n("2b0e"),k=n("3f9d");N["a"].use(k["a"]);var M={name:"Actions2",data:function(){return{commentModeStatus:!1,canSend:!1,IWannaDoSth:!1,currentHeight:0,weiboIDCommentContent:{}}},computed:{currentWeiboIDCommentContent:function(){return this.weiboIDCommentContent[this.$route.params.weiboID]}},watch:{currentWeiboIDCommentContent:function(t){this.canSend=""!==t}},created:function(){var t=this;_["a"].$on("closeCommentMode",(function(){t.commentModeStatus=!1}))},activated:function(){"string"!==typeof this.weiboIDCommentContent[this.$route.params.weiboID]&&this.$set(this.weiboIDCommentContent,this.$route.params.weiboID,"")},deactivated:function(){this.commentModeStatus=!1},methods:{openCommentMode:function(){var t=this;this.commentModeStatus=!0,this.$nextTick((function(){return t.$refs.myTextarea.$el.focus()}))},sendComment:function(){var t=this;if(""!==this.weiboIDCommentContent[this.$route.params.weiboID])if(this.$store.state.user.isLogin){var e=this.$store.state.user.id,n=this.$route.params.weiboID,o=this.currentWeiboIDCommentContent.replace(/[<|>]/g,""),i=new FormData;i.append("user",e),i.append("weibo",n),i.append("content",o),Object($["a"])(i).then((function(e){t.$parent.getRootCommentList(),t.weiboIDCommentContent[t.$route.params.weiboID]="",t.commentModeStatus=!1}))}else this.IWannaDoSth=!0,this.currentHeight=this.$parent.$el.children[1].scrollTop,this.$store.commit("app/SET_REDIRECT_ROUTE",this.$route.path),this.$router.push({name:"LoginByEmail"})}}},S=M,x=(n("60f4"),Object(u["a"])(S,I,g,!1,null,"00adcf4d",null)),L=x.exports,W=n("4e44"),y={name:"index",components:{AComment:W["a"],Actions2:L,PlaceHolder:D,NavBar:d,AWeibo:b["a"]},data:function(){return{showPopup:!1,weiboDetail:{user:{},images:[]},show:!0,rootCommentList:[],scrollBarHeight:0,currentActionName:"评论",insertShareWeiboList:!1,insertAgreeWeiboList:!1,shareWeiboList:[]}},computed:{actions:function(){var t=this.weiboDetail,e=t.share_number,n=t.comment_number,o=t.agree_number;return[{actionName:"转发",number:e},{actionName:"评论",number:n},{actionName:"赞",number:o}]}},activated:function(){this.getWeiboDetail(),this.getRootCommentList()},deactivated:function(){this.currentActionName="评论"},methods:{pushNewRootComment:function(t){this.rootCommentList.push(t)},closeCommentMode:function(){_["a"].$emit("closeCommentMode")},getWeiboDetail:function(){var t=this,e=this.$route.params.weiboID;Object(h["a"])(e).then((function(e){t.weiboDetail=e.data}))},getRootCommentList:function(){var t=this;Object($["c"])({weibo:this.$route.params.weiboID,parent:0}).then((function(e){t.rootCommentList=e.data}))}}},A=y,E=(n("23f9"),Object(u["a"])(A,o,i,!1,null,"b4998f90",null));e["default"]=E.exports},f965:function(t,e,n){}}]);