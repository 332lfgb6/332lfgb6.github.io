(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[21],{"25a4":function(t,e,n){"use strict";var s=n("8062"),a=n.n(s);a.a},"352c":function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login"},[n("div",{staticClass:"main-part"},[n("i",{staticClass:"iconfont icon-close close-btn",on:{click:function(e){return t.$router.back()}}}),n("div",{staticClass:"main"},[n("div",{staticClass:"lead"},[t._v("请输入验证码")]),n("span",{staticClass:"tip"},[t._v("\n        验证码已通过邮箱发送至\n        "+t._s(t.$store.state.user.email)+"\n      ")]),n("div",{staticClass:"input"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.code,expression:"code"}],staticClass:"fill-code",attrs:{type:"number",placeholder:"输入验证码"},domProps:{value:t.code},on:{input:function(e){e.target.composing||(t.code=e.target.value)}}}),n("div",{staticClass:"input-right"},[t.canReset?n("i",{staticClass:"iconfont icon-blank",on:{click:t.reset}}):n("div",{staticClass:"placeholder"}),t.canRegain?n("span",{staticClass:"regain",on:{click:t.regainCode}},[t._v("重新获取")]):n("span",{staticClass:"no-regain"},[t._v(t._s(t.second)+"秒后可重新获取")])]),n("span",{staticClass:"error-message",domProps:{textContent:t._s(t.errorMessage)}})]),n("div",{staticClass:"get-code",class:{"can-login":t.canLogin},on:{click:t.login}},[t._v("登录\n      ")])])])])},a=[],i=(n("d3b7"),n("25f0"),n("c24f")),c={name:"index",props:["backIcon","lead","tip","placeholder"],data:function(){return{code:"",canLogin:!1,canRegain:!1,canReset:!1,second:10,timer:null,errorMessage:""}},watch:{code:function(t,e){var n=t.length;0===n?this.canReset=!1:n>0&&n<6?(this.canReset=!0,this.canReset=!0):6===n?(this.canLogin=!0,this.canReset=!0):(this.code=e,this.canReset=!0)}},created:function(){this.setInterval()},activated:function(){this.timer||this.setInterval()},deactivated:function(){clearInterval(this.timer),this.timer=null,this.second=10},methods:{login:function(){var t=this;this.$store.dispatch("user/login",{loginWay:"email",code:this.code}).then((function(e){20===e.data.code?t.$router.push(t.$store.state.app.redirectRoute):t.errorMessage=e.data.message}))},setInterval:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(){var t=this;this.timer=setInterval((function(){t.second-=1,0===t.second&&(t.second=10,t.canRegain=!0,clearInterval(t.timer))}),1e3)})),regainCode:function(){var t=this;Object(i["a"])({email:this.$store.state.user.email}).then((function(e){t.canRegain=!1;var n=setInterval((function(){t.second-=1,0===t.second&&(t.second=10,t.canRegain=!0,clearInterval(n))}),1e3)}))},reset:function(){this.code=""}}},o=c,r=(n("25a4"),n("2877")),l=Object(r["a"])(o,s,a,!1,null,"9b5df9b2",null);e["default"]=l.exports},8062:function(t,e,n){}}]);